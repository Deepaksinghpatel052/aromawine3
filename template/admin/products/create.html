{% extends 'admin/base-template.html' %}
{% block content %}
{% load static %}
		 <div class="page-content">
		 <section class="content-header">
        
        <div class="header-title">
            <h1>{{Page_title}}</h1>
            
            
        </div>
		
    </section>
	<style>
	.lwine {
    display: flex;
    align-items: center;
    width: 100%;
}

.btn-lwine {
    background: #cca261;
    border: 0px;
    color: #fff;
    font-size: 16px;
    padding: 8px 10px;
    height: 44px;
    margin-left: 5px;
    border-radius: 5px;
}

.btn-lwine:hover {
    background: #8a5401;
    border: 0px;
}
	</style>
<div class="container-fluid">
  <div class="row p-t-b-20">
    <div class="col-md-12">
      <!-- <div class="card no-b"> -->
      {% if form.errors %}
    {% for field in form %}
        {% for error in field.errors %}
            <div class="alert alert-danger">
                <strong>{{field.title}}  {{ error|escape }}</strong>
            </div>
        {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
        <div class="alert alert-danger">
            <strong>{{ error|escape }}</strong>
        </div>
    {% endfor %}
{% endif %}


<input type="hidden" id="duti_set" value="{{''|get_duty}}">
<input type="hidden" id="gst_set" value="{{''|get_GST}}">

<div class="login-form-content">
  <form action="" method="POST" enctype='multipart/form-data'>
    {% csrf_token %}  
     
      <div class="panel-group" id="accordion">
    <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle" id="first_tab" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
          
          Add Information
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse show in">
      <div class="panel-body">
       <div class="row">
<div class="col-md-4">

        <div class="form-group">
                   <label class="age">LWIN Code*<span id="show_error_message_id_LWineCode" style="color:red; background-color: beige;"> </span></label>
				   <input type="hidden" id="product_id" value="0">
           <div class="lwine">
                   {{form.LWineCode}}
                   <button class="btn-lwine" id="run_lwine_code"  type="button" title="search in Lwine">Search</button>
</div>
        </div>
      </div>
       	
        <div class="col-md-4">   
              <label class="age">Select*  <span id="show_error_message_Select_Type" style="color:red; background-color: beige;"> </span></label>
                       {{form.Select_Type}}
                       <span id="show_error_message_Select_Type_not_avelabel" style="color:red;"></span>
                        </div>
            
             <div class="col-md-4">
        <div class="form-group">
                   <label class="age">Product Name* <span id="show_error_message_Product_name" style="color:red; background-color: beige;"> </span></label>
                   {{form.Product_name}}

        </div>
      </div>
<div class="col-md-12">
  <span id="show_error_message_id_LWineCode_avelabel" style="color:red;"></span>
</div>
       
    <div class="col-md-6">
        <div class="form-group scroll_cat producer_name_ajax">
                   <label class="age">Producer Name/Winery* <span id="show_error_message_Producer" style="color:red; background-color: beige;"> </span></label>
                   {{form.Producer}}
                    <span id="show_error_message_Producer_not_avelabel" style="color:red;"></span>

        </div>
      </div>
    <div class="col-md-6">
        <div class="form-group scroll_cat">
                   <label class="age">Category* <span id="show_error_message_Category" style="color:red; background-color: beige;"> </span></label>
                   
                                       
                                     {{form.Category}}
                   <span id="show_error_message_Category_not_avelabel" style="color:red;"> </span>         

        </div>
      </div>
    
  
    
    <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Color* <span id="show_error_message_Color" style="color:red; background-color: beige;"> </span></label>
            {{form.Color}}
                  
        <span id="show_error_message_Color_not_avelabel" style="color:red;"> </span>
        </div>
      </div>
    <div class="col-md-4">
        <div class="form-group appellation_ajax">
                   <label class="age">Appellation* <span id="show_error_message_Appellation" style="color:red; background-color: beige;"> </span></label>
           {{form.Appellation}}
                  <span id="show_error_message_Appellation_not_avelabel" style="color:red;"> </span>

        </div>
      </div>
      <div class="col-md-2" style="margin-top: 14px;">
        
<div class="form-group scroll_cat">
                   <label class="age"> </label><br>
         <a href="#" data-toggle="modal" data-target="#modal-default-Appellation"><button class="btn-lwine" type="button" title="Add New Varietal">Add Appellation</button></a>
                  

        </div>

      </div>
    





    <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Bottle Size* <span id="show_error_message_Bottel_Size" style="color:red; background-color: beige;"> </span> </label>
       {{form.Bottel_Size}}
                  <span id="show_error_message_Bottel_Size_Not_avelabel" style="color:red;"> </span>

        </div>
      </div>
      
   
  <div class="col-md-6">
        <div class="form-group classifications_ajax">
                   <label class="age">Classification* <span id="show_error_message_Classification" style="color:red; background-color: beige;"> </span></label>
          {{form.Classification}}
                  

        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Alcohol Percentage</label>
          {{form.AlcoholPercentage}}
                  

        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Flavours</label>
          {{form.Flavours}}
                  

        </div>
      </div>



      <div class="col-md-6">
        <div class="form-group scroll_cat vintage_year_ajax">
                   <label class="age">Vintage* <span id="show_error_message_Vintage" style="color:red; background-color: beige;"> </span></label>
           {{form.Vintage}}
                  

        </div>
      </div>
    
    <div class="col-md-4">
        <div class="form-group scroll_cat Varietals_ajax">
                   <label class="age">Varietals*  <span id="show_error_message_Varietals" style="color:red; background-color: beige;"> </span></label>
           {{form.Varietals}}
           <span id="show_error_message_Varietals_not_Avelabel" style="color:red;"> </span>
                  

        </div>
      </div>
      <div class="col-md-2" style="margin-top: 14px;">
        
<div class="form-group scroll_cat">
                   <label class="age"> </label><br>
         <a href="#" data-toggle="modal" data-target="#modal-default"><button class="btn-lwine" type="button" title="Add New Varietal">Add New Varietals</button></a>
                  

        </div>

      </div>
    <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Country* <span id="show_error_message_Country" style="color:red; background-color: beige;"> </span></label>
          {{form.Country}}
           <span id="show_error_message_Country_not_avelabel" style="color:red;"> </span>
                  

        </div>
      </div>
    <div class="col-md-6">
        <div class="form-group region_name_ajax">
                   <label class="age">Regions* <span id="show_error_message_Regions" style="color:red; background-color: beige;"> </span></label>
           {{form.Regions}}
                  
        <span id="show_error_message_Regions_not_avelabel" style="color:red;"> </span>
        </div>
      </div>
    <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Grape* <span id="show_error_message_Grape" style="color:red; background-color: beige;"> </span></label>
           {{form.Grape}}
                  <span id="show_error_message_Grape_not_avelabel" style="color:red;"> </span>

        </div>
      </div>
    <div class="col-md-6">
        <div class="form-group">
                   <label class="age">Status </label>
           <select  class="form-control " name="product_status">
           <option>Activate</option>
           <option>Deactivate</option>
           
           </select>
                  

        </div>
      </div>
    
    <div class="col-md-12">
        <div class="form-group">
                   <label class="age">Aroma Wine Notes</label>
           <div class="summernote">
           {{form.Description}}
           </div>
                  

        </div>
      </div>
    
    
     </div>
     
     <div class="row">
  <div class="col-md-2">
    <button type="reset" class="btn-block btn btn-white subbtn" data-dismiss="modal">Cancel</button>
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <button type="button" class="btn-block btn btn-white subbtn click_to_stope_submit product_info_section"  >Next</button>  
    </div>
  </div>
  <div class="col-md-5">
    <div class="form-group">
    <span id="show_error_message" style="color:red;"> </span>
    </div>
  </div>
</div>
     
     
      </div>
    </div>
  </div>

   <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle collapsed" id="second_tab" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
          
         Add Product Image
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse">
      <div class="panel-body">
        <div class="row">
  
  <div class="col-md-12">
    <div class="form-group">
      <label class="age">Product Thumbnail (600px*300px)</label>
        <input type="file" id="add_product_thumbnail" class="form-control">
    <input type="hidden" name="product_thumbnail_image" id="product_thumbnail_image" value="">
    </div>
        <div class="form-group" id="show_product_thumbnail">
                  
           
                  

        </div>
      </div>

      <div class="col-md-12">
        <div class="form-group">
                   <label class="age">Multiple Images (300px*428px)</label>
           <input type="file" id="add_product_image" class="form-control">
                  

        </div>
      </div>
       <div class="col-md-12" id="show_images">
      
      </div>
    
     
    <div class="col-md-12">
        <div class="form-group">
                   <label for="chkPassport" style="width:100%;">
    <input type="checkbox" id="chkPassport" name="add_banner_image">
    Background Cover Photo (500px*300px)
</label>
                  

        </div>
      </div>
    
    <div class="col-md-12" id="dvPassport" style="display: none">
    <div class="form-group">
    <input type="file" id="add_product_banner" class="form-control">
    <input type="hidden" name="product_banner_image" id="product_banner_image" value="">
    </div>
        <div class="form-group" id="show_images_banner">
                  
           
                  

        </div>
      </div>
    
   
    
     </div>
     
     <div class="row">
  <div class="col-md-2">
    <button type="button" class="btn-block btn btn-white subbtn" data-dismiss="modal">Cancel</button>
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <button type="button" class="btn-block btn btn-white subbtn" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">Next</button>
    </div>
  </div>
</div>
     
      </div>
    </div>
  </div> 
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
          
          Price And Stock
        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse">
      <div class="panel-body">
    <div class="table-responsive " id="show_vintage_year_stock_data">
      
                                     <!---Table Ends---->
</div>

<div class="row">
  <div class="col-md-2">
    <button type="submit" class="btn-block btn btn-white subbtn" data-dismiss="modal">Cancel</button>
  </div>
  <div class="col-md-3">
    <div class="form-group">
      <button type="button" class="btn-block btn btn-white subbtn" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">Next</button>
    </div>
  </div>
</div>
    
      </div>
    </div>
  </div>
  
  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
         
          SEO
        </a>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse">
      <div class="panel-body">
       <div class="row">
  
  

     <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label for="metatitle">Meta title</label>
                                                        {{form.Meta_Title}}
                                                    </div>
                                                   
                          </div>
                          <div class="col-md-6">
                           <div class="form-group">
                                                        <label for="metakeywords">Meta Keywords</label>
                                                        {{form.Meta_Keyword}}
                                                    </div>
                          </div>
     
  
  
  
  <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label for="metadescription">Meta Description</label>
                                                        {{form.Meta_Description}}
                                                    </div>
                                                </div>
     </div>
     
     <div class="row">
  <div class="col-md-2">
    <button type="submit" class="btn-block btn btn-white subbtn" data-dismiss="modal">Cancel</button>
  </div>
  <div class="col-md-2">
    <div class="form-group">
      <button type="submit" class="btn-block btn btn-white subbtn" >Save</button>
    </div>
  </div>

  <div class="col-md-3">
    <div class="form-group">
      <button type="submit" class="btn-block btn btn-white subbtn" name="_continue" value="editing">Save & Continue editing</button>
    </div>
  </div>
    
</div>
     
      </div>
    </div>
  </div>
    

    

</div>
</form>
</div>



          <!-- </div> -->
               </div>
      </div>
         </div>
      </div>

<!------------Modal Popup------->
  <div class="modal fade in sp-map" id="modal-default">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Manage Varietals</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true" style="font-size: 32px;">×</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="login-form-content">
  <form action=""  method="post" enctype='multipart/form-data'>
      
{% csrf_token %}


    <div class="row">
     <div class="col-md-12">
      <div class="form-group">
                   <label class="age">Varietals Name</label>
                   {{VarietalsForm.Varietals_Name}}
<span id="Varietals_submit_from_product_error" style="color:red;"></span> 
                   <!-- <input type="text" class="form-control" placeholder="Enter your winery name"> -->
        </div>
     </div>
    </div>
  

<div class="row">
 
  <div class="col-md-6">
    <div class="form-group">
      <button type="button" id="Varietals_submit_from_product" class="btn-block btn btn-white subbtn">Save</button>
    </div>
  </div>
</div>
</form>
</div>
        </div>
      </div>
    </div>
  </div>
  





<div id="uploadimageModal_edit" class="modal" role="dialog">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Upload & Crop Image</h4>
         <button class="btn btn-success crop_image_edit">Save Image</button>
         </div>
         <div class="modal-body">
            <div class="row">
               <div class="col-md-8 text-center">
                  <div id="image_demo_edit" style="width:350px; margin-top:30px"></div>
               </div>
               <div class="col-md-4" style="padding-top:30px;">
                  <br />
                  <br />
                  <br/>
                  <div class="row">
                     <div class="col-md-12 set_loader"></div>
                  </div>
                  <!--<button class="btn btn-success crop_image_edit">Crop Image</button>-->
               </div>
            </div>
         </div>
         <div class="modal-footer">
             
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>




<div id="uploadimageModal_edit_thumbnail" class="modal" role="dialog">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Upload & Crop Product Thumbnail</h4>
         </div>
         <div class="modal-body">
            <div class="row">
               <div class="col-md-8 text-center">
                  <div id="image_demo_edit_thumbnail" style="width:350px; margin-top:30px"></div>
               </div>
               <div class="col-md-4" style="padding-top:30px;">
                  <br />
                  <br />
                  <br/>
                  <div class="row">
                     <div class="col-md-12 set_loader"></div>
                  </div>
                  <!--<button class="btn btn-success crop_image_edit">Crop Image</button>-->
               </div>
            </div>
         </div>
         <div class="modal-footer">
             <button class="btn btn-success crop_image_edit_thumbnail">Save Image</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>



<div id="uploadimageModal_edit_banner" class="modal" role="dialog">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Upload & Crop Image</h4>
         </div>
         <div class="modal-body">
            <div class="row">
               <div class="col-md-8 text-center">
                  <div id="image_demo_edit_banner" style="width:350px; margin-top:30px"></div>
               </div>
               <div class="col-md-4" style="padding-top:30px;">
                  <br />
                  <br />
                  <br/>
                  <div class="row">
                     <div class="col-md-12 set_loader"></div>
                  </div>
                  <!--<button class="btn btn-success crop_image_edit">Crop Image</button>-->
               </div>
            </div>
         </div>
         <div class="modal-footer">
             <button class="btn btn-success crop_image_edit_banner">Save Image</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>




<!------------Modal Popup------->
  <div class="modal fade in sp-map" id="modal-default-Appellation">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Manage Appellation</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true" style="font-size: 32px;">×</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="login-form-content">
  <form action="" method="post" id="Appellation_submit_from_product" enctype='multipart/form-data'>
      
{% csrf_token %}


    <div class="row">
     <div class="col-md-12">
      <div class="form-group">
                   <label class="age">Appellation Name</label>
                   {{AppellationForm.Appellation_Name}}
                   <span id="Appellation_submit_from_product_error" style="color:red;"></span>
                   <!-- <input type="text" class="form-control" placeholder="Enter your winery name"> -->
        </div>
     </div>
    </div>
   
      <div class="row">
     <div class="col-md-12">
      <div class="form-group">
                   <label class="age">Select Country</label>
                   {{AppellationForm.Country}}
                   <!-- <input type="text" class="form-control" placeholder="Enter your winery name"> -->
        </div>
     </div>
    </div>

       <div class="row">
     <div class="col-md-12">
      <div class="form-group">
                   <label class="age">Select Set To</label>
                   {{AppellationForm.Set_To}}
                   <!-- <input type="text" class="form-control" placeholder="Enter your winery name"> -->
        </div>
     </div>
    </div>


<div class="row">
 
  <div class="col-md-6">
    <div class="form-group">
      <button type="submit" class="btn-block btn btn-white subbtn" >Save</button>
    </div>
  </div>
</div>
</form>
</div>
        </div>
      </div>
    </div>
  </div>
  




    <!------------Modal Popup------->

 {% endblock %}


   {% block script %}

     <script src='{% static "admin/assets/cropme/croppie_product_image.js" %}' ></script>
     <script src='{% static "admin/assets/js/create_lwine_search.js" %}' ></script>
    <script type="text/javascript">
   $(document).ready(function() {


  $("#id_Set_To").addClass("form-control");
  $("#id_Producer_Image").addClass("form-control");
  $('.summernote_text').summernote({
        placeholder: 'Aroma Wine Notes',
        tabsize: 2,
        height: 200
      });
});

$(document).ready(function(){



$(".product_info_section").click(function(){



var get_product_name = $("#id_Product_name").val();
$("#id_Meta_Title").val(get_product_name);
$("#id_Meta_Keyword").val(get_product_name);
$("#id_Meta_Description").val(get_product_name);

var lwine_code =  $("#id_LWineCode").val();

$("#show_vintage_year_stock_data").html('');
$("#id_Vintage option:selected").each(function(){

 var vintage_year =  $(this).text();
$("#show_vintage_year_stock_data").append('<div class="since_'+vintage_year+'"><table width="100%" border="1" class="table table-striped table-bordered newpage editableTable" align="center" cellpadding="0" cellspacing="0" style=" font-size: 15px;"><thead><tr style="cursor: pointer;"><td colspan="10"><div class="yearwine"><span>'+vintage_year+'<span></span></span></div></td><td><div class="add_button year_add add_rows" data-vintage_year="'+vintage_year+'"> <a class="add-row"><i class="fa fa-plus"></i>Add Row</a></div></td></tr><tr style="cursor: pointer;"><th align="left" valign="top">Bottle</th><th align="left" valign="top">Resale Price</th><th align="left" valign="top">Available Count</th><th align="left" valign="top">Discount Cost</th><th align="left" valign="top">Duty</th><th align="left" valign="top">GST (%)</th><th align="left" valign="top">Bond Cost</th><th align="left" valign="top">Available Count</th><th align="left" valign="top">Bond Descount Cost</th><th align="left" valign="top">Aroma Cost</th><th align="left" valign="top">Action</th></tr></thead><tbody class="add_row_'+vintage_year+'"></tbody></table></div>');




get_data_with_year_lwine_code(lwine_code, vintage_year);

});





});


$(".click_to_stope_submit").click(function(e){

var set_status = true;

$("#show_error_message_Select_Type").text('');
$("#show_error_message_Product_name").text('');
$("#show_error_message_Producer").text('');
$("#show_error_message_Country").text('');
$("#show_error_message_Regions").text('');

$("#show_error_message_Category").text('');
$("#show_error_message_Color").text('');
$("#show_error_message_Appellation").text('');
$("#show_error_message_Bottel_Size").text('');
$("#show_error_message_Classification").text('');
$("#show_error_message_Vintage").text('');
$("#show_error_message_Grape").text('');
$("#show_error_message_Varietals").text('');
$("#show_error_message_id_LWineCode").text('');



$("#show_error_message").html('');

if($("#id_LWineCode").val()=="")
{
  set_status =false;
  $("#show_error_message_id_LWineCode").text('Please Enter.');
}


if($("#id_Select_Type").val()=="")
{
  set_status =false;
  $("#show_error_message_Select_Type").text('Please select Type.');
}
if($("#id_Product_name").val()=="")
{
  set_status =false;
  $("#show_error_message_Product_name").text('Product name is required.');
}
if($("#id_Producer").val()=="")
{
  set_status =false;
  $("#show_error_message_Producer").text('Please select producer.');
}
if($("#id_Country").val()=="")
{
  set_status =false;
  $("#show_error_message_Country").text('Please select country.');
}
if($("#id_Regions").val()=="")
{
  set_status =false;
  $("#show_error_message_Regions").text('Please select regions.');
}


if($("#id_Category").val()=="")
{
  set_status =false;
  $("#show_error_message_Category").text('Please select category.');
}
if($("#id_Color").val()=="")
{
  set_status =false;
  $("#show_error_message_Color").text('Please select color.');
}
if($("#id_Appellation").val()=="")
{
  set_status =false;
  $("#show_error_message_Appellation").text('Please select appellation.');
}
if($("#id_Bottel_Size").val()=="")
{
  set_status =false;
  $("#show_error_message_Bottel_Size").text('Please select bottel size.');
}
if($("#id_Classification").val()=="")
{
  set_status =false;
  $("#show_error_message_Classification").text('Please select classification.');
}

if($("#id_Vintage").val()=="")
{
  set_status =false;
  $("#show_error_message_Vintage").text('Please select vintage.');
}

if($("#id_Grape").val()=="")
{
  set_status =false;
  $("#show_error_message_Grape").text('Please select grape.');
}

if($("#id_Varietals").val()=="")
{
  set_status =false;
  $("#show_error_message_Varietals").text('Please select varietals.');
}



console.log(set_status);
if(set_status)
{
   $("#first_tab").addClass('collapsed');
  $("#collapseOne").removeClass('in');
  $("#collapseOne").removeClass('show');
   
   $("#second_tab").removeClass('collapsed');
   $("#collapseTwo").addClass('in');
   $("#collapseTwo").addClass('show');

}
else{
  e.preventDefault();
   $("#show_error_message").html('<div class="alert alert-danger alert-dismissible"><a href="#" class="close" data-dismiss="alert" aria-label="close" style="color: crimson!important">&times;</a><strong>Some field is required.</strong></div>');
}


});

});

$(document).on("click",'.remove_div',function(){

      $(this).closest(".remove_this_div").remove();
});


 </script>
      {% endblock %}
